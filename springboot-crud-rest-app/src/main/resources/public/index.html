<!DOCTYPE html>
<html ng-app="homeApp" lang="en" xmlns:th="http://www.thymeleaf.org">
  <title>Home</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
 <link rel="stylesheet" href="/css/jquery.dataTables.min.css">
 <link rel="stylesheet" href="/css/buttons.dataTables.min.css"> 
<!-- datetimepicker plugin -->
 <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.css"> -->
<link rel="stylesheet" href="/css/tempusdominus-bootstrap-4.min.css" />
 <link rel="stylesheet" href="/css/font-awesome.min.css"> 
 <link rel="stylesheet" href="/css/angular-toastr.css" />

 
  <script src="/js/jquery.min.js"></script>
  <script src = "/js/jquery.dataTables.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
<script src="/js/angular.min.js"></script>
<script src="/js/angular-route.js"></script>
<script src="/js/angular-animate.js"></script>
<script type="text/javascript" src="/js/angular-datatables.min.js"></script>
<script src="/js/moment.js"></script>
<script type="text/javascript" src="/js/tempusdominus-bootstrap-4.min.js"></script>


<script src="/js/dataTables.buttons.min.js"></script>
<script src="/js/buttons.colVis.min.js"></script>
<script src="/js/buttons.flash.min.js"></script>
<script src="/jszip/3.1.3/jszip.min.js"></script>
<script src="/js/pdfmake.min.js"></script>
<script src="/js/vfs_fonts.js"></script>
<script src="/js/buttons.html5.min.js"></script>
<script src="/js/buttons.print.min.js"></script>
<script src="/js/angular-datatables.buttons.min.js"></script>
<script src="/js/angular-toastr.tpls.js"></script>
<style>

html,body{
width:100% !important;
height:100% !important;
overflow: hidden;
font-family: Arial !important;
font-size:12px;
}
.card {
  width: 300px;
}


#wrapper {
    padding-left: 70px;
    transition: all .4s ease 0s;
    height: 100%
}

#sidebar-wrapperMain {
    margin-left: -150px;
    left: 50px;
    width: 150px;
    background: #222;
    position: fixed;
    height: 100%;
    z-index: 10000;
    transition: all .4s ease 0s;
}
.sidebar-nav {
    display: block;
    float: left;
    width: 150px;
    list-style: none;
    margin: 0;
    padding: 0;
}
#page-content-wrapper {
    padding-left: 0;
    margin-left: 0;
    width: 100%;
    height: auto;
}
#wrapper.active {
    padding-left: 150px;
}
#wrapper.active #sidebar-wrapperMain {
    left: 150px;
}

#page-content-wrapper {
  width: 100%;
}

#sidebar_menu li a, .sidebar-nav li a {
    color: #999;
    display: block;
    float: left;
    text-decoration: none;
    width: 150px;
    background: #252525;
    border-top: 1px solid #373737;
    border-bottom: 1px solid #1A1A1A;
    -webkit-transition: background .5s;
    -moz-transition: background .5s;
    -o-transition: background .5s;
    -ms-transition: background .5s;
    transition: background .5s;
}
.sidebar_name {
    padding-top: 25px;
    color: #fff;
    opacity: .7;
}

.sidebar-nav li {
  line-height: 40px;
  text-indent: 20px;
}

.sidebar-nav li a {
  color: #999999;
  display: block;
  text-decoration: none;
}

.sidebar-nav li a:hover {
  color: #fff;
  background: rgba(255,255,255,0.2);
  text-decoration: none;
}

.sidebar-nav li a:active,
.sidebar-nav li a:focus {
  text-decoration: none;
}

.sidebar-nav > .sidebar-brand {
	height: 43px;
    line-height: 43px;
    font-size: 15px;;
}

.sidebar-nav > .sidebar-brand a {
  color: #999999;
}

.sidebar-nav > .sidebar-brand a:hover {
  color: #fff;
  background: none;
}

#main_icon
{
    float:right;
   padding-right: 35px;
   padding-top:20px;
}
.sub_icon
{
    float: right;
    padding-right: 21px;
    padding-top: 15px;
}
.content-header {
  height: 65px;
  line-height: 65px;
}

.content-header h1 {
  margin: 0;
  margin-left: 20px;
  line-height: 65px;
  display: inline-block;
}

@media (max-width:767px) {
    #wrapper {
    padding-left: 70px;
    transition: all .4s ease 0s;
}
#sidebar-wrapperMain {
    left: 70px;
}
#wrapper.active {
    padding-left: 150px;
}
#wrapper.active #sidebar-wrapperMain {
    left: 150px;
    width: 150px;
    transition: all .4s ease 0s;
}
}

</style>
<body ng-controller="indexController">

<div style="width: 100%;height: 100%;">

<!--Navbar -->
 <nav class = "navbar navbar-expand-sm bg-primary navbar-dark">
            <a class = "navbar-brand" href = "#">
               <img src = "img/sse.png" 
                  style="width: 73px;height: 28px;" alt = "">
            </a>
            <ul class = "navbar-nav ml-auto">
              
                <li class="nav-item dropdown">
		        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-4" data-toggle="dropdown"
		          aria-haspopup="true" aria-expanded="false">
		          <i class="fa fa-user-circle"></i> Profile </a>
		        <div class="dropdown-menu dropdown-menu-right dropdown-info" aria-labelledby="navbarDropdownMenuLink-4">
		          <a class="dropdown-item" href="#">My account</a>
		          <a class="dropdown-item" href="#">Log out</a>
		        </div>
		      </li>
 
            </ul>
            
         </nav>

<div id="wrapper" class="active">
      
      <!-- Sidebar -->
      <div id="sidebar-wrapperMain">
      <ul id="sidebar_menu" class="sidebar-nav">
           <li class="sidebar-brand"><a class="menu-toggle" id="home" ng-click="redirectUrl($event)" href="#">Home<i class="fa fa-bars sub_icon" aria-hidden="true"></i></a></li>
      </ul>
      <ul  class="sidebar-nav">  
	  <li class="sidebar-brand"><a id="customer_master"  ng-click="redirectUrl($event)">Customer<i class="fa fa-user sub_icon" aria-hidden="true"></i></a></li>
      <li class='sidebar-brand'><a id="vendor_master"   ng-click="redirectUrl($event)">Vendor<i class="fa fa-user-circle sub_icon"></i></a></li> 
      <li class='sidebar-brand' ><a id="employee_master" ng-click="redirectUrl($event)">Employee<i class="fa fa-users sub_icon" aria-hidden="true"></i></a></li> 
      <li class='sidebar-brand' ><a id="product_master"  ng-click="redirectUrl($event)">Product<i class="fa fa-product-hunt sub_icon" aria-hidden="true"></i></a></li> 
      <li class='sidebar-brand'><a id="vehicle_master"  ng-click="redirectUrl($event)">Vehicle<i class="fa fa-truck sub_icon" aria-hidden="true"></i></a></li>
      <li class='sidebar-brand' ><a id="user_master"  ng-click="redirectUrl($event)">User<i class="fa fa-user sub_icon" aria-hidden="true"></i></a></li>
      <li class='sidebar-brand'><a id="userAccess_master"  ng-click="redirectUrl($event)">Access<i class="fa fa-check-square-o sub_icon" aria-hidden="true"></i></a></li>
      <li class='sidebar-brand'><a id="billing_master"  ng-click="redirectUrl($event)">Billing<i class="fa fa-money sub_icon" aria-hidden="true"></i></a></li>
      <li class='sidebar-brand' ><a id="receipt_master"  ng-click="redirectUrl($event)">Receipt<i class="fa fa-address-book sub_icon" aria-hidden="true"></i></a></li>
	  <li class='sidebar-brand' ><a id="logout"  ng-click="redirectUrl($event)">Logout<i class="fa fa-sign-out sub_icon" aria-hidden="true"></i></a></li>
      </ul>
        
      </div>
          
      <!-- Page content -->
      <div id="page-content-wrapper">
        <div class="page-content inset">
           <div class="row">
              <div class="col-md-12">
              <div ng-view ></div>
            </div>
          </div> 
         
        </div>
      </div>
      
    </div>
<!-- <div ng-view style="width: 100%;height: 90%;"></div> -->
</div>
<script>
var app = angular.module("homeApp", ["ngRoute" ,"datatables","datatables.buttons","ngAnimate", "toastr"]);
app.config(['$routeProvider',function($routeProvider) {
    $routeProvider
      .when("/", {
        templateUrl: 'Login.html',
        controller: 'myCtrl'
    }) 
    .when('/Dashboard/:username', {
        templateUrl: 'Dashboard.html',
        controller: 'EmpController'
    })
     .when('/home', {
        templateUrl: 'home.html',
        controller: 'HomeController'
    })
     .when('/customer_master', {
        templateUrl: 'customer.html',
        controller: 'CustomerController'
    })
     .when('/vendor_master', {
        templateUrl: 'vendor.html',
        controller: 'VendorController'
    })
     .when('/employee_master', {
        templateUrl: 'employee.html',
        controller: 'EmployeeController'
    })
     .when('/product_master', {
        templateUrl: 'product.html',
        controller: 'ProductController'
    })
     .when('/vehicle_master', {
        templateUrl: 'vehicle.html',
        controller: 'VehicleController'
    })
    .when('/userAccess_master', {
        templateUrl: 'userAccess.html',
        controller: 'UserAccessController'
    })
    .when('/billing_master', {
        templateUrl: 'billing.html',
        controller: 'BillingController'
    })
    .when('/receipt_master', {
        templateUrl: 'receipt.html',
        controller: 'ReceiptController'
    })
     .when('/user_master', {
        templateUrl: 'user.html',
        controller: 'UserController'
    });
    /* .
    otherwise({
        redirectTo: '/Home'
    }); */
	
	
}]);
app.controller('indexController',['$scope','$location', "$timeout", function ($scope, $location, $timeout) {
	$scope.user = {
	        username: '',
	        password: ''
	    }
	
	 $scope.redirectUrl= function (data){
		console.log(data);
		var menuId = data.target.id
		if(menuId == "home"){
			 $timeout( function(){
				 angular.element('#navMenu').trigger('click');
				 $location.path("/"+menuId);
				$("#title").text("Home");
				//angular.element('#menuToggle').css('z-index',"0");
		        }, 500 );
		}else if(menuId == "customer_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("Customer");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "vendor_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("Vendor");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "employee_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("Employee");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "product_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("Product");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "vehicle_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("Vehicle");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "user_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("User");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "userAccess_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("UserAccess");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "billing_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("Billing");
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
		}else if(menuId == "receipt_master"){
			$timeout( function(){
				angular.element('#navMenu').trigger('click');
				$location.path("/"+menuId);
				$("#title").text("Receipt"); 
				//angular.element('#menuToggle').css('z-index',"0");
	        }, 500);
			
		}
		
	} 
	//alert("dsfds")
}]);
app.controller("myCtrl", ['$scope', '$window','$location','$rootScope', function($scope, $window, $location,$rootScope){
	//$scope.loggedIn = false;    
	
	$scope.loginSubmit = function (username){
	    	/* $http.get('/checklogin').success(function(data) {
	          console.log(data);
	          if (data === true)
	            $scope.loggedIn = true;
	          else
	            $scope.loggedIn = false;
	        })
	        .error(function(data) {
	          console.log('error: ' + data);
	        }); */
	        
		 			if ($scope.user.username) {    
	                    $location.path('/Dashboard/'+ username);
	                    $rootScope.loggedIn = true;
	                }
	                else{
	                    alert('Login incorrect');
	                    $rootScope.loggedIn = false;
	            }
		}

	  
	}]);
app.controller("EmpController", ['$scope', '$routeParams' ,'$window' ,'$rootScope', function($scope, $routeParams , $window ,$rootScope ){
 

  if( $routeParams.username){
	  //$scope.loggedIn =$rootScope.loggedIn;
	  $scope.loggedIn =true;
	  $scope.username = $routeParams.username;
  }

	  
}]);
app.controller('HomeController', function ($scope) {
	
});
app.controller('CustomerController',function ($scope,$http,$location,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder,toastr) {
	scope=$scope;
	$scope.listCustomerJson =[{customerId: "1111",customerName: "Demo",pan: "12354EWRWE",tan: "12354DFGDD",kyc: "123544UGDSCF",iec: "12354UUFFA",customerDetails:[{ customerAddr: "3,xyz street,mumbai", mobileNo: "123544", phoneNo: "123544",gstin: "12354RTUGF"},{ customerAddr: "3,xyz street,mumbai", mobileNo: "123544", phoneNo: "123544",gstin: "12354RTUGF"}]},
							  {customerId: "2222",customerName: "XYZ",pan: "12354EWRWE",tan: "12354DFGDD",kyc: "123544UGDSCF" ,iec: "12354UUFFA", customerDetails:[{ customerAddr: "3,xyz street,mumbai", mobileNo: "123544", phoneNo: "123544",gstin: "12354RTUGF"}]},
							  {customerId: "3333",customerName: "ABC",pan: "12354EWRWE",tan: "12354DFGDD",kyc: "123544UGDSCF" ,iec: "12354UUFFA", customerDetails:[{ customerAddr: "3,abc street,mumbai", mobileNo: "123544", phoneNo: "123544",gstin: "12354RTUGF"}]},
							  {customerId: "4444",customerName: "QWERT",pan: "12354EWRWE",tan: "12354DFGDD",kyc: "123544UGDSCF" ,iec: "12354UUFFA", customerDetails:[{ customerAddr: "3,sri street,mumbai", mobileNo: "123544", phoneNo: "123544",gstin: "12354RTUGF"}]}];				
	//$scope.customerDetails ={customerAddr: "",mobileNo: "",phoneNo: "",GSTIN: ""};
	
	$scope.cm = {};
	$scope.cm.dtCustomer = DTOptionsBuilder.newOptions()
    .withOption('order', [0, 'asc'])
    .withButtons([
      {
        extend: 'collection',
        text: 'Export',
        buttons: [{
            extend: 'copyHtml5',
            title: 'Mylist'
          },
          {
            extend: 'pdfHtml5',
            title: 'My list'
          },
		  {
            extend: 'excel',
            title: 'Excel'
          },
		  {
            extend: 'csv',
            title: 'My list'
          }
        ]
      }
    ]);
$scope.createCust = function() {
$("#custModal").modal("show");
$(".custId").css("display","");
$(".addCust").css("display","block");
$(".updateCust").css("display","none");

$scope.item = {};
$scope.item.customerDetails = [{customerAddr: "",mobileNo: "",phoneNo: "",gstin: ""}];
}

$scope.addCustomerDetails = function(data){
	$scope.item.customerDetails.push({customerAddr: "",mobileNo: "",phoneNo: "",gstin: ""});

}

$scope.deleteCustomerDetails = function(index){
	$scope.item.customerDetails.splice(index,1);

}
$scope.addItem = function(item) {
	var url = location.origin +"/api/v2/customers";
	//$scope.listCustomerJson.push(angular.copy(item));
	    $http({
	        method : 'POST',
	        url : url,
	        data : angular.toJson($scope.item),
	        headers : {
	        'Content-Type' : 'application/json'
	        }
	        }).then(function (response) {
	            //$scope.listCustomerJson = response.data;
	            toastr.success('Data added successfully');
	        	$scope.initcust();
	        }, function error(response) {
	        	toastr.success('Data not added');
	          console.log(response.status);
	        });
	    $scope.item = {};
        $scope.item.customerDetails=[{customerAddr: "",mobileNo: "",phoneNo: "",gstin: ""}];
}
$scope.updateItem = function(item) {
 /* for(i in $scope.listCustomerJson) {
                if($scope.listCustomerJson[i].customerId == $scope.item.customerId) {
                    $scope.listCustomerJson[i] = $scope.item;
                }
         } */
         
         
	var url = location.origin +"/api/v2/customerupdate";
	//$scope.listCustomerJson.push(angular.copy(item));
	console.log($scope.item);
	    $http({
	        method : 'PUT',
	        url : url,
	        data : angular.toJson($scope.item),
	        headers : {
	        'Content-Type' : 'application/json'
	        }
	        }).then(function (response) {
	            //$scope.listCustomerJson = response.data;
	            toastr.success('Data updated successfully');
	        	$scope.initcust();
	        }, function error(response) {
	        	toastr.success('Data not updated');
	          console.log(response.status);
	        });
         
         
}
$scope.removeItem = function(item){
//$scope.listCustomerJson.splice(index,1);
	console.log(item.id);
	var url=location.origin +"/api/v2/customer/"+item.id;
	 $http({
		    method : 'DELETE',
		    url : url,
		   }).then(function successCallback(response) {
			   toastr.success('Data deleted successfully');
			   $scope.initcust();
		   }, function errorCallback(response) {
			   toastr.success('Data not deleted');
		    console.log(response.statusText);
		   });
}
 $scope.editCustomer = function(index){
   $("#custModal").modal("show");
   $(".custId").css("display","none");
   $(".addCust").css("display","none");
   $(".updateCust").css("display","block");
for(i in $scope.listCustomerJson) {
        if($scope.listCustomerJson[i].customerId == index.customerId) {
            $scope.item = angular.copy($scope.listCustomerJson[i]);
        }
    }
 }	
 
 $scope.initcust =function(){
	 
	 var url=location.origin +"/api/v2/customers";
	 $http({
		    method : 'GET',
		    url : url,
		   }).then(function successCallback(response) {
		   $scope.listCustomerJson = response.data;
		   }, function errorCallback(response) {
		    console.log(response.statusText);
		   });
 }
 $scope.initcust();
});
app.controller('VendorController', function ($scope ,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	
	$scope.listVendorJson =[{vendorId: "1111",vendorName: "Demo",PAN: "12354EWRWE",TAN: "12354DFGDD",KYC: "123544UGDSCF",IEC: "12354UUFFA",vendorDetails:[{ vendorAddr: "3,xyz street,mumbai", mobileNo: "123544", phoneNo: "123544",GSTIN: "12354RTUGF"},{ vendorAddr: "3,xyz street,mumbai", mobileNo: "123544", phoneNo: "123544",GSTIN: "12354RTUGF"}]},
	                        {vendorId: "2222",vendorName: "XYZ",PAN: "12354EWRWE",TAN: "12354DFGDD",KYC: "123544UGDSCF" ,IEC: "12354UUFFA", vendorDetails:[{ vendorAddr: "3,xyz street,mumbai", mobileNo: "123544", phoneNo: "123544",GSTIN: "12354RTUGF"}]},
	                        {vendorId: "3333",vendorName: "ABC",PAN: "12354EWRWE",TAN: "12354DFGDD",KYC: "123544UGDSCF" ,IEC: "12354UUFFA", vendorDetails:[{ vendorAddr: "3,abc street,mumbai", mobileNo: "123544", phoneNo: "123544",GSTIN: "12354RTUGF"}]},
	                        {vendorId: "4444",vendorName: "QWERT",PAN: "12354EWRWE",TAN: "12354DFGDD",KYC: "123544UGDSCF" ,IEC: "12354UUFFA", vendorDetails:[{ vendorAddr: "3,sri street,mumbai", mobileNo: "123544", phoneNo: "123544",GSTIN: "12354RTUGF"}]}];				
	$scope.vm = {};
	$scope.vm.dtVendor = DTOptionsBuilder.newOptions()
    .withOption('order', [0, 'asc'])
    .withButtons([
      {
        extend: 'collection',
        text: 'Export',
        buttons: [{
            extend: 'copyHtml5',
            title: 'Mylist'
          },
          {
            extend: 'pdfHtml5',
            title: 'My list'
          },
		  {
            extend: 'excel',
            title: 'Excel'
          },
		  {
            extend: 'csv',
            title: 'My list'
          }
        ]
      }
    ]);
$scope.createVendor = function() {
$("#venModal").modal('show');
$(".venId").css("display","");
$(".addVen").css("display","block");
$(".updateVen").css("display","none");
$scope.item = {};
$scope.item.vendorDetails = [{vendorAddr: "",mobileNo: "",phoneNo: "",GSTIN: ""}];
}

$scope.addVendorDetails = function(data){
	$scope.item.vendorDetails.push({vendorAddr: "",mobileNo: "",phoneNo: "",GSTIN: ""});

}

$scope.deleteVendorDetails = function(index){
	$scope.item.vendorDetails.splice(index,1);

}
$scope.addItem = function(item) {
$scope.listVendorJson.push(angular.copy(item));
$scope.item = {};
$scope.item.vendorDetails=[{vendorAddr: "",mobileNo: "",phoneNo: "",GSTIN: ""}];

}
$scope.updateItem = function(item) {
for(i in $scope.listVendorJson) {
              if($scope.listVendorJson[i].vendorId == $scope.item.vendorId) {
                  $scope.listVendorJson[i] = $scope.item;
              }
       }
}
$scope.removeItem = function(index){
$scope.listVendorJson.splice(index,1);
}
$scope.editVendor = function(index){
 $("#venModal").modal('show');
 $(".venId").css("display","none");
 $(".addVen").css("display","none");
 $(".updateVen").css("display","block");
for(i in $scope.listVendorJson) {
      if($scope.listVendorJson[i].vendorId == index.vendorId) {
          $scope.item = angular.copy($scope.listVendorJson[i]);
      }
  }
}
	
});
app.controller('EmployeeController', function ($scope ,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	$scope.listEmployeeJson =[{empId: "1111",empName: "Demo", empRole: "Supervisor", designation: "GradeA",mobileNo:"34534545",address:"ABC nagar",PAN:"3fsdf4sd",DOB:"22/7/1991",fatherName:"xzsd",salaryPackage:"8000"},
							  {empId: "2222",empName: "XYZ", empRole: "Employee", designation: "GradeB",mobileNo:"34534545",address:"ABC nagar",PAN:"3fsdf4sd",DOB:"22/7/1991",fatherName:"xzsd",salaryPackage:"8000"},
							  {empId: "3333",empName: "ABC", empRole: "Manager", designation: "GradeC",mobileNo:"34534545",address:"ABC nagar",PAN:"3fsdf4sd",DOB:"22/7/1991",fatherName:"xzsd",salaryPackage:"8000"},
							  {empId: "4444",empName: "QWERT", empRole: "Sales Executive", designation: "GradeD",mobileNo:"34534545",address:"ABC nagar",PAN:"3fsdf4sd",DOB:"22/7/1991",fatherName:"xzsd",salaryPackage:"8000"}];				
	$scope.em = {};
	$scope.em.dtOptions = DTOptionsBuilder.newOptions()
    .withOption('order', [0, 'asc'])
    .withButtons([
      {
        extend: 'collection',
        text: 'Export',
        buttons: [{
            extend: 'copyHtml5',
            title: 'Mylist'
          },
          {
            extend: 'pdfHtml5',
            title: 'My list'
          },
		  {
            extend: 'excel',
            title: 'Excel'
          },
		  {
            extend: 'csv',
            title: 'My list'
          }
        ]
      }
    ]);
$scope.createEmp = function() {
$("#empModal").modal('show');
$(".empId").css("display","");
$(".addEmp").css("display","block");
$(".updateEmp").css("display","none");
$scope.item = {};
}
$scope.addItem = function(item) {
$scope.listEmployeeJson.push(item);
$scope.item = {};

}
$scope.updateItem = function(item) {
 for(i in $scope.listEmployeeJson) {
                if($scope.listEmployeeJson[i].empId == $scope.item.empId) {
                    $scope.listEmployeeJson[i] = $scope.item;
                }
         }
}
$scope.removeItem = function(index){
$scope.listEmployeeJson.splice(index,1);
}
 $scope.editCustomer = function(index){
 
   $("#empModal").modal('show');
   $(".empId").css("display","none");
   $(".addEmp").css("display","none");
   $(".updateEmp").css("display","block");
for(i in $scope.listEmployeeJson) {
        if($scope.listEmployeeJson[i].empId == index.empId) {
            $scope.item = angular.copy($scope.listEmployeeJson[i]);
        }
    }
 }	
 $scope.init =function(){
	 $('#datetimepicker4').datetimepicker({
	        format: 'DD/MM/YYYY'
	    });
 }
 $scope.init();
});
app.controller('ProductController', function ($scope,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	
	$scope.listProductJson =[{productCode:"1111",productId: "1111",productName: "WashingMachine", HSNSAC: "4566", TaxType: "0%"},
							  {productCode:"2222",productId: "1223",productName: "Cooler", HSNSAC: "3456", TaxType: "12%"},
							  {productCode:"3333",productId: "3456",productName: "Fan", HSNSAC: "2345", TaxType: "5%"},
							  {productCode:"4444",productId: "5643",productName: "Furniture", HSNSAC: "1234", TaxType: "18%"}];				
	$scope.pm = {};
	$scope.pm.dtProduct = DTOptionsBuilder.newOptions()
    .withOption('order', [0, 'asc'])
    .withButtons([
      {
        extend: 'collection',
        text: 'Export',
        buttons: [{
            extend: 'copyHtml5',
            title: 'Mylist'
          },
          {
            extend: 'pdfHtml5',
            title: 'My list'
          },
		  {
            extend: 'excel',
            title: 'Excel'
          },
		  {
            extend: 'csv',
            title: 'My list'
          }
        ]
      }
    ]);
$scope.createProduct = function() {
$("#prodModal").modal('show');
$(".prodId").css("display","");
$(".addProd").css("display","block");
$(".updateProd").css("display","none");
$scope.item = {};
}
$scope.addItem = function(item) {
$scope.listProductJson.push(item);
$scope.item = {};

}
$scope.updateItem = function(item) {
for(i in $scope.listProductJson) {
               if($scope.listProductJson[i].productCode == $scope.item.productCode) {
                   $scope.listProductJson[i] = $scope.item;
               }
        }
}
$scope.removeItem = function(index){
$scope.listProductJson.splice(index,1);
}
$scope.editProduct = function(index){

  $("#prodModal").modal('show');
  $(".prodId").css("display","none");
  $(".addProd").css("display","none");
  $(".updateProd").css("display","block");
for(i in $scope.listProductJson) {
       if($scope.listProductJson[i].productCode == index.productCode) {
           $scope.item = angular.copy($scope.listProductJson[i]);
       }
   }
}	
});
app.controller('VehicleController', function ($scope, $window ,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	
	$scope.listVehicleJson =[{codeId: "1111",truckNo: "3455", rcno: "4566", fcDate: "23/4/2019", truckType: "Transport truck"},
							  {codeId: "1223",truckNo: "56767", rcno: "3456", fcDate: "23/4/2019", truckType: "Dump truck"},
							  {codeId: "3456",truckNo: "5675", rcno: "2345", fcDate: "23/4/2019", truckType: "Garbage truck"},
							  {codeId: "5643",truckNo: "56756", rcno: "1234", fcDate: "23/4/2019", truckType: "Box truck"}];				
	$scope.vehm = {};
	$scope.vehm.dtVehicle = DTOptionsBuilder.newOptions()
    .withOption('order', [0, 'asc'])
    .withButtons([
      {
        extend: 'collection',
        text: 'Export',
        buttons: [{
            extend: 'copyHtml5',
            title: 'Mylist'
          },
          {
            extend: 'pdfHtml5',
            title: 'My list'
          },
		  {
            extend: 'excel',
            title: 'Excel'
          },
		  {
            extend: 'csv',
            title: 'My list'
          }
        ]
      }
    ]);
$scope.createVehicle = function() {
$("#vehModal").modal('show');
$(".vehId").css("display","");
$(".addVeh").css("display","block");
$(".updateVeh").css("display","none");
$scope.item = {};
}
$scope.createTrip = function() {
$('#tripModal').modal('show');
}
$scope.addItem = function(item) {
$scope.listVehicleJson.push(item);
$scope.item = {};

}
$scope.updateItem = function(item) {
for(i in $scope.listVehicleJson) {
               if($scope.listVehicleJson[i].codeId == $scope.item.codeId) {
                   $scope.listVehicleJson[i] = $scope.item;
               }
        }
}
$scope.removeItem = function(index){
$scope.listVehicleJson.splice(index,1);
}
$scope.editVehicle = function(index){

  $("#vehModal").modal('show');
  $(".vehId").css("display","none");
  $(".addVeh").css("display","none");
  $(".updateVeh").css("display","block");
for(i in $scope.listVehicleJson) {
       if($scope.listVehicleJson[i].codeId == index.codeId) {
           $scope.item = angular.copy($scope.listVehicleJson[i]);
       }
   }
}
$scope.newtabTrip =function(){
	 var w = $window.open();
	  var html = $(".tripItems").html();
	  $(w.document.head).append("<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>");
	  var scriptjquery = document.createElement( 'script' );
	  scriptjquery.type = 'text/javascript';
	  scriptjquery.src = 'https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js';
	  $(w.document.head).append( scriptjquery );
	  var scriptbootstrap = document.createElement( 'script' );
	  scriptbootstrap.type = 'text/javascript';
	  scriptbootstrap.src = 'https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js';
	  $(w.document.head).append( scriptbootstrap );
	  $(w.document.body).html(html);
	setTimeout(function(){ 
	    w.print();
	}, 500);
}
$scope.init =function(){
	 $('#datetimepicker5').datetimepicker({
	        format: 'DD/MM/YYYY'
	    });
	 $scope.trip = {from: "",to: "",date: "",vehicleType: "",vehicleNo: "",driverName: ""};
	 scope=$scope;
}
$scope.init();
	
$scope.bay=function() {
	var xmlhttp;
	if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp = new XMLHttpRequest();
		var myWindow = $window.open('', '', 'width=2000,height=1000');
		  $(myWindow.document.head).append("<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>");
		  var scriptjquery = document.createElement( 'script' );
		  scriptjquery.type = 'text/javascript';
		  scriptjquery.src = 'https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js';
		  $(myWindow.document.head).append( scriptjquery );
		  var scriptbootstrap = document.createElement( 'script' );
		  scriptbootstrap.type = 'text/javascript';
		  scriptbootstrap.src = 'https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js';
		  $(myWindow.document.head).append( scriptbootstrap );
		  
		myWindow.document.write("<body style='font: bold; font-size: xxx-small; line-height: 0.5cm;'><img src=\"img/sse.png height='42px' width='42px'\"><h1 align='center'>SSE LOGISTICS PRIVATE LIMITED</h1> ");
						//+ "<h4  align='center'>484, Pantheon Plaza, Pantheon Road, Egmore, Chennai - 600 008. INDIA</h4>"
						//+ "<h4  align='center'>Ph:+91-44-1111 4444, 2222 3333  FAX:+91-44-5559-5555</h4>");
		
		//$(myWindow.document.body).append("<div class='container'><div class='row'><div class='col-xs-5'><div class='panel panel-default'><div class='panel-heading'><h3 class='panel-title'>Company Details</h3></div><div class='panel-body'><dl class='dl-horizontal'><dt>Name</dt><dd><strong>Acme Corporation</strong></dd><dt>Industry</dt><dd>Software Development</dd><dt>Address</dt><dd>Field 3, Moon</dd><dt>Phone</dt><dd>123.4456.4567</dd><dt>Email</dt><dd>mainl@acme.com</dd><dt>Tax NO</dt><dd class='mono'>123456789</dd><dt>Tax Office</dt><dd>A' Moon</dd></div></div></div><div class='col-xs-7'><div class='panel panel-default'><div class='panel-heading'><h3 class='panel-title'>Customer Details</h3></div><div class='panel-body'><dl class='dl-horizontal'><dt>Name</dt><dd>Microsoft Corporation</dd><dt>Industry</dt><dd>Software Development</dd><dt>Address</dt><dd>One Microsoft Way Redmond, WA 98052-7329, USA</dd><dt>Phone</dt><dd>(425) 882-8080</dd><dt>Email</dt><dd>contact@microsoft.com</dd><dt>Tax NO</dt><dd class='mono'>123456789</dd><dt>&nbsp;</dt><dd>&nbsp;</dd></div></div></div></div></div>");
		$(myWindow.document.body).append("<table border='1'; cellpadding=0.1; cellspacing=5; align='center' >"
						+ "<tr><td><b>FROM</b></td><td><b>TO</b></td>"
						+ "<td>DATE</td><td>VEHICLETYPE</td><td>VEHICLENO </td><td>DRIVERNAME</td>" + "</tr><tr><td><b> " +  $scope.trip.from
						+ "   </b></td><td><b>" + $scope.trip.to + "</b></td>" + "<td>" + $scope.trip.date
						+ "</td><td>" + $scope.trip.vehicleType + "</td><td>" + $scope.trip.vehicleNo + " </td><td>"+$scope.trip.driverName+"</td>"
						+ "</tr></table>");
		$(myWindow.document.body).append("");
		
		$(myWindow.document).close();
		$(myWindow).focus();
		$(myWindow).print();
		$(myWindow).close();
	} else {// code for IE6, IE5
		xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange = function() {
		if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
			document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
		}
	}
	
	xmlhttp.send();
}
});
app.controller('UserController', function ($scope,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	
	$scope.listUserJson =[{codeId: "1111",userId: "1111",userName: "Demo", email: "Supervisor@gamil.com", password: "GradeA", retypepassword: "GradeA", userRole: "Supervisor"},
						  {codeId: "2222",userId: "2222",userName: "XYZ", email: "Employee@gmail.com", password: "GradeB", retypepassword: "GradeA", userRole: "Employee"},
						  {codeId: "3333",userId: "3333",userName: "ABC", email: "Manager@gmail.com", password: "GradeC", retypepassword: "GradeA", userRole: "Manager"},
						  {codeId: "4444",userId: "4444",userName: "QWERT", email: "SalesExecutive@gmail.com", password: "GradeD", retypepassword: "GradeA", userRole: "SalesExecutive"}];				
	$scope.um = {};
	$scope.um.dtUser = DTOptionsBuilder.newOptions()
    .withOption('order', [0, 'asc'])
    .withButtons([
      {
        extend: 'collection',
        text: 'Export',
        buttons: [{
            extend: 'copyHtml5',
            title: 'Mylist'
          },
          {
            extend: 'pdfHtml5',
            title: 'My list'
          },
		  {
            extend: 'excel',
            title: 'Excel'
          },
		  {
            extend: 'csv',
            title: 'My list'
          }
        ]
      }
    ]);
$scope.createUser = function() {
$("#usrModal").modal('show');
$(".usrId").css("display","");
$(".addUsr").css("display","block");
$(".updateUsr").css("display","none");
$scope.item = {};
}
$scope.addItem = function(item) {
$scope.listUserJson.push(item);
$scope.item = {};

}
$scope.updateItem = function(item) {
for(i in $scope.listUserJson) {
            if($scope.listUserJson[i].codeId == $scope.item.codeId) {
                $scope.listUserJson[i] = $scope.item;
            }
     }
}
$scope.removeItem = function(index){
$scope.listUserJson.splice(index,1);
}
$scope.editCustomer = function(index){

$("#usrModal").modal('show');
$(".usrId").css("display","none");
$(".addUsr").css("display","none");
$(".updateUsr").css("display","block");
for(i in $scope.listUserJson) {
    if($scope.listUserJson[i].codeId == index.codeId) {
        $scope.item = angular.copy($scope.listUserJson[i]);
    }
}
}
	
});

app.controller('UserAccessController', function ($scope,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	
	$scope.listUserAccessJson =[{permissionScreen: "Customer",addPerm: true, editPerm: true, delPerm: true, viewPerm: true, reportPerm: true},
								  {permissionScreen: "vendor",addPerm: true, editPerm: true, delPerm: true, viewPerm: true, reportPerm: true},
								  {permissionScreen: "Billing",addPerm: true, editPerm: true, delPerm: true, viewPerm: true, reportPerm: true},
								  {permissionScreen: "Product",addPerm: true, editPerm: true, delPerm: true, viewPerm: true, reportPerm: true}];				
});
app.controller('BillingController', function ($scope,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	
	$scope.listBillingJson =[{customerName: "SAI Sakthi",shipperName: "xyzz", consignorName: "ABCCC", billingDetails: {}},
							  {customerName: "Samsang",shipperName: "ABCCC", consignorName: "ABCCC", billingDetails: {}},
							  {customerName: "titan",shipperName: "ABCCC", consignorName: "ABCCC",billingDetails: {}},
							  {customerName: "sonaata",shipperName: "ABCCC", consignorName: "ABCCC", billingDetails: {}}];	
	$scope.customerInvoiceJson ={productName: "",amount: "", quantity: "", currency: "",tax:"",totalAmount:""};	
	
	$scope.init_Billing =function(){
		 $('#datetimepicker_billDate').datetimepicker({
		        format: 'DD/MM/YYYY'
		    });
		    $('#datetimepicker_billvenDate').datetimepicker({
		        format: 'DD/MM/YYYY'
		    });
		    $('#datetimepicker_startBillDate').datetimepicker({
		        format: 'DD/MM/YYYY'
		    });
		    $('#datetimepicker_endBillDate').datetimepicker({
		        format: 'DD/MM/YYYY'
		    });
	}
	$scope.calculateAmountTax =function(data){
		console.log(data);
		var amt =$scope.customerInvoiceJson.amount * $scope.customerInvoiceJson.quantity;
		$scope.customerInvoiceJson.totalAmount =amt + amt * data;
	}
	$scope.navRedirect =function(event){
		
		 $(".nav").find(".active").removeClass("active");
		   $(event).addClass("active");
		   var currEvent=$(event.target).attr('bind-attr');
		  if(currEvent =="Receipt"){
			  $('#CustomerInvoice').hide();
			  $('#VendorInvoice').hide();
			  $('#Receipt').show();
		  }else if(currEvent =="VendorInvoice"){
			  $('#CustomerInvoice').hide();
			  $('#VendorInvoice').show();
			  $('#Receipt').hide();
		  }else{
			  $('#CustomerInvoice').show();
			  $('#VendorInvoice').hide();
			  $('#Receipt').hide();
		  }
	}
	$scope.init_Billing();
	scope=$scope;
});
app.controller('ReceiptController', function ($scope,DTOptionsBuilder, DTColumnBuilder, DTColumnDefBuilder) {
	
	$scope.listReceiptJson =[{instrumentType: "Sew",shipperName: "xyzz", consignorName: "ABCCC", billingDetails: {}},
							  {instrumentType: "Software",shipperName: "ABCCC", consignorName: "ABCCC", billingDetails: {}},
							  {instrumentType: "Equipment",shipperName: "ABCCC", consignorName: "ABCCC",billingDetails: {}},
							  {instrumentType: "sonaata",shipperName: "ABCCC", consignorName: "ABCCC", billingDetails: {}}];				
	$scope.paymentJson ={paymentType: "",instrumentDate: "", exRate: "", currency: "",instrumentNo:"",totalAmount:""};	
	$scope.calculatePaymentAmountTax =function(data){
		console.log(data);
		var amt =$scope.paymentJson.amount * $scope.paymentJson.quantity;
		$scope.paymentJson.totalAmount =amt + amt * data;
	}
	$scope.init_Inst =function(){
		 $('#datetimepicker_instDate').datetimepicker({
		        format: 'DD/MM/YYYY'
		    });
	}
	 $('#datetimepicker_startBillDate1').datetimepicker({
	        format: 'DD/MM/YYYY'
	    });
	    $('#datetimepicker_endBillDate2').datetimepicker({
	        format: 'DD/MM/YYYY'
	    });
	$scope.navRedirect =function(event){
		
		 $(".nav").find(".active").removeClass("active");
		   $(event).addClass("active");
		   var currEvent=$(event.target).attr('bind-attr');
		  if(currEvent =="view"){
			  $('#Payment').hide();
			  $('#Receipt').hide();
			  $('#view').show();
		  }else if(currEvent =="Receipt"){
			  $('#Payment').hide();
			  $('#Receipt').show();
			  $('#view').hide();
		  }else{
			  $('#Payment').show();
			  $('#Receipt').hide();
			  $('#view').hide();
		  }
	}
	$scope.init_Inst();
	scope=$scope;
});
$(document).ready(function(){
	$(".menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("active");
	});
	/* $('#datetimepicker4').datetimepicker({
        format: 'DD/MM/YYYY'
    }); */

});
</script>
</body>
</html>